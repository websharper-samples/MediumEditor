function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO;a=self;b=a.Samples=a.Samples||{};c=b.HelloWorld=b.HelloWorld||{};d=a.WebSharper=a.WebSharper||{};e=d.Operators=d.Operators||{};f=d.Obj=d.Obj||{};g=d.UI=d.UI||{};h=g.Doc=g.Doc||{};i=g.Elt=g.Elt||{};j=d.Arrays=d.Arrays||{};k=g.Templating=g.Templating||{};l=k.Runtime=k.Runtime||{};m=l.Server=l.Server||{};n=m.TemplateInstance=m.TemplateInstance||{};o=m.ProviderBuilder=m.ProviderBuilder||{};p=g.Var=g.Var||{};q=m.Handler=m.Handler||{};r=a.MediumEditor_Templates=a.MediumEditor_Templates||{};s=g.Var$1=g.Var$1||{};t=d.JavaScript=d.JavaScript||{};u=t.Pervasives=t.Pervasives||{};v=d.Collections=d.Collections||{};w=v.List=v.List||{};x=d.Unchecked=d.Unchecked||{};y=a.System=a.System||{};z=y.Guid=y.Guid||{};A=a.StartupCode$MediumEditor$Client=a.StartupCode$MediumEditor$Client||{};B=g.View=g.View||{};C=g.Array=g.Array||{};D=a.EventTarget;E=g.Docs=g.Docs||{};F=g.AttrProxy=g.AttrProxy||{};G=v.Dictionary=v.Dictionary||{};H=v.HashSet=v.HashSet||{};I=l.Client=l.Client||{};J=d.Seq=d.Seq||{};K=g.Client=g.Client||{};L=K.Templates=K.Templates||{};M=g.Updates=g.Updates||{};N=a.Node;O=g.DocElemNode=g.DocElemNode||{};P=a.Object;Q=g.Snap=g.Snap||{};R=t.JS=t.JS||{};S=g.Attrs=g.Attrs||{};T=g.Abbrev=g.Abbrev||{};U=T.Fresh=T.Fresh||{};V=v.DictionaryUtil=v.DictionaryUtil||{};W=d.Enumerator=d.Enumerator||{};X=W.T=W.T||{};Y=g.ConcreteVar=g.ConcreteVar||{};Z=g.CheckedInput=g.CheckedInput||{};_0=d.Numeric=d.Numeric||{};_1=g.DomUtility=g.DomUtility||{};_2=a.CharacterData;_3=K.Attrs=K.Attrs||{};_4=_3.Dyn=_3.Dyn||{};_5=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};_6=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_7=a.WindowOrWorkerGlobalScope;_8=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};_9=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_=L.Prepare=L.Prepare||{};$=d.Slice=d.Slice||{};ba=v.KeyCollection=v.KeyCollection||{};bb=g.An=g.An||{};bc=K.Settings=K.Settings||{};bd=T.Mailbox=T.Mailbox||{};be=v.HashSetUtil=v.HashSetUtil||{};bf=g.AttrModule=g.AttrModule||{};bg=d.List=d.List||{};bh=bg.T=bg.T||{};bi=d.Strings=d.Strings||{};bj=K.Docs=K.Docs||{};bk=bj.RunState=bj.RunState||{};bl=bj.NodeSet=bj.NodeSet||{};bm=g.Anims=g.Anims||{};bn=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bo=g.String=g.String||{};bp=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bq=d.Concurrency=d.Concurrency||{};br=g.AppendList=g.AppendList||{};bs=d.Char=d.Char||{};bt=g.DynamicAttrNode=g.DynamicAttrNode||{};bu=g.Easing=g.Easing||{};bv=bq.AsyncBody=bq.AsyncBody||{};bw=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bx=bq.CT=bq.CT||{};by=T.HashSet=T.HashSet||{};bz=d.Queue=d.Queue||{};bA=bq.Scheduler=bq.Scheduler||{};bB=d.CancellationTokenSource=d.CancellationTokenSource||{};bC=bj.DomNodes=bj.DomNodes||{};bD=a.Error;bE=d.OperationCanceledException=d.OperationCanceledException||{};bF=d.Lazy=d.Lazy||{};bG=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bH=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bI=bH.LazyRecord=bH.LazyRecord||{};bJ=a.IntelliFactory;bK=bJ&&bJ.Runtime;bL=a.jQuery;bM=a.Math;bN=a.console;bO=a.Date;c.Main=function(){var bP,bQ,bR,bS,bT;bP=(bQ=(bR=h.BindView(h.Verbatim,c.editedText().get_View()),o.Make().WithHole({$:0,$0:"preview",$1:bR})),(bS=q.CompleteHoles(bQ.k,bQ.h,[]),(bT=new n.New(bS[1],r.main(bS[0])),(bQ.i=bT,bT)))).get_Doc().OnAfterRender(function(){new a.MediumEditor(".editable");a.jQuery(".medium-editor-element").keyup(function(){return s.Set(c.editedText(),a.jQuery("#formatted").val());});a.jQuery(".medium-editor-element").on("input",function(){return s.Set(c.editedText(),a.jQuery("#formatted").val());});});L.LoadLocalTemplates("");h.RunById("main",bP);};c.editedText=function(){A.$cctor();return A.editedText;};e.FailWith=function(bP){throw new bD(bP);};e.KeyValue=function(bP){return[bP.K,bP.V];};f=d.Obj=bK.Class({Equals:function(bP){return this===bP;},GetHashCode:function(){return -1;}},null,f);f.New=bK.Ctor(function(){},f);h=g.Doc=bK.Class({},f,h);h.Verbatim=function(bP){var bQ;return h.Mk(C.MapTreeReduce(function(bR){return x.Equals(bR.nodeType,N.TEXT_NODE)?{$:5,$0:bR}:{$:1,$0:E.CreateElemNode(bR,S.EmptyAttr(),null)};},null,function(bR,bS){return{$:0,$0:bR,$1:bS};},(bQ=bL.parseHTML(bP),x.Equals(bQ,null)?[]:bQ)),B.Const());};h.Mk=function(bP,bQ){return new h.New(bP,bQ);};h.RunById=function(bP,bQ){var bR;bR=_1.Doc().getElementById(bP);x.Equals(bR,null)?e.FailWith("invalid id: "+bP):h.Run(bR,bQ);};h.BindView=function(bP,bQ){return h.EmbedView(B.Map(bP,bQ));};h.Run=function(bP,bQ){E.LinkElement(bP,bQ.docNode);h.RunInPlace(false,bP,bQ);};h.EmbedView=function(bP){var bQ;bQ=E.CreateEmbedNode();return h.Mk({$:2,$0:bQ},B.Map(a.ignore,B.Bind(function(bR){E.UpdateEmbedNode(bQ,bR.docNode);return bR.updates;},bP)));};h.get_Empty=function(){return h.Mk(null,B.Const());};h.RunInPlace=function(bP,bQ,bR){var bS;bS=E.CreateRunState(bQ,bR.docNode);B.Sink(bb.get_UseAnimations()||bc.BatchUpdatesEnabled()?bd.StartProcessor(E.PerformAnimatedUpdate(bP,bS,bR.docNode)):function(){E.PerformSyncUpdate(bP,bS,bR.docNode);},bR.updates);};h.TextNode=function(bP){return h.Mk({$:5,$0:_1.CreateText(bP)},B.Const());};h.TextView=function(bP){var bQ;bQ=E.CreateTextNode();return h.Mk({$:4,$0:bQ},B.Map(function(bR){E.UpdateTextNode(bQ,bR);},bP));};h.New=bK.Ctor(function(bP,bQ){f.New.call(this);this.docNode=bP;this.updates=bQ;},h);i=g.Elt=bK.Class({OnAfterRender:function(bP){return this["OnAfterRender'"](bP);},"OnAfterRender'":function(bP){var bQ,bR,bS,bT,bU,bV,bW;bQ=this.docNode$1;bQ!=null&&bQ.$==1?(bR=bQ.$0,bK.SetOptional(bR,"Render",(bS=bK.GetOptional(bR.Render),bS!=null&&bS.$==1?(bT=bS.$0,{$:1,$0:function(bX){bT(bX);bP(bX);}}):{$:1,$0:bP}))):bQ!=null&&bQ.$==6?(bU=bQ.$0,bK.SetOptional(bU,"Render",(bV=bK.GetOptional(bU.Render),bV!=null&&bV.$==1?(bW=bV.$0,{$:1,$0:function(bX){bW(bX);bP(bX);}}):{$:1,$0:bP}))):e.FailWith("Invalid docNode in Elt");return this;}},h,i);i.TreeNode=function(bP,bQ){var bR,bS;function bT(bU){return bU[1];}bR=M.Create(bQ);return new i.New$1({$:6,$0:bP},B.Map2Unit((bS=j.map(function(bU){return S.Updates(bT(bU));},bP.Attrs),C.TreeReduce(B.Const(),B.Map2Unit,bS)),bR.v),j.get(bP.Els,0),bR);};i.New$1=bK.Ctor(function(bP,bQ,bR,bS){h.New.call(this,bP,bQ);this.docNode$1=bP;this.updates$1=bQ;this.elt=bR;this.rvUpdates=bS;},i);j.get=function(bP,bQ){j.checkBounds(bP,bQ);return bP[bQ];};j.length=function(bP){return bP.dims===2?bP.length*bP.length:bP.length;};j.checkBounds=function(bP,bQ){if(bQ<0||bQ>=bP.length)e.FailWith("Index was outside the bounds of the array.");};j.set=function(bP,bQ,bR){j.checkBounds(bP,bQ);bP[bQ]=bR;};n=m.TemplateInstance=bK.Class({get_Doc:function(){return this.doc;}},f,n);n.New=bK.Ctor(function(bP,bQ){f.New.call(this);this.doc=bQ;this.allVars=bP.$==0?bP.$0:e.FailWith("Should not happen");},n);o=m.ProviderBuilder=bK.Class({WithHole:function(bP){this.h.push(bP);return this;}},null,o);o.Make=function(){var bP;return o.New(null,(bP=z.NewGuid(),a.String(bP)),[]);};o.New=function(bP,bQ,bR){return new o({i:bP,k:bQ,h:bR});};p=g.Var=bK.Class({},f,p);p.New=bK.Ctor(function(){f.New.call(this);},p);q.CompleteHoles=function(bP,bQ,bR){var bT,bU,bV,bW,bX,bY;function bS(bZ,b0){var b1,b2,b3,b4;return bU.Contains(bZ)?null:(b1=b0===0?(b2=s.Create$1(""),[{$:8,$0:bZ,$1:b2},b2]):b0===1?(b3=s.Create$1(0),[{$:13,$0:bZ,$1:b3},b3]):b0===2?(b4=s.Create$1(false),[{$:9,$0:bZ,$1:b4},b4]):e.FailWith("Invalid value type"),(bT.set_Item(bZ,b1[1]),{$:1,$0:b1[0]}));}bT=new G.New$5();bU=new H.New$3();bV=W.Get(bQ);try{while(bV.MoveNext()){bW=bV.Current();(bW.$==8?(bX=[bW.$0,I.Box(bW.$1)],true):bW.$==11?(bX=[bW.$0,I.Box(bW.$1)],true):bW.$==10?(bX=[bW.$0,I.Box(bW.$1)],true):bW.$==13?(bX=[bW.$0,I.Box(bW.$1)],true):bW.$==12?(bX=[bW.$0,I.Box(bW.$1)],true):bW.$==9&&(bX=[bW.$0,I.Box(bW.$1)],true))?(bY=bX[0],bU.Add(bY),bT.set_Item(bY,bX[1])):void 0;}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}return[J.append(bQ,j.choose(function(bZ){return bS(bZ[0],bZ[1]);},bR)),{$:0,$0:bT}];};r.main=function(bP){L.LoadLocalTemplates("index");return bP?L.NamedTemplate("index",{$:1,$0:"main"},bP):void 0;};s=g.Var$1=bK.Class({},f,s);s.Set=function(bP,bQ){bP.Set(bQ);};s.Create$1=function(bP){return new Y.New(false,Q.New({$:2,$0:bP,$1:[]}),bP);};u.NewFromSeq=function(bP){var bQ,bR,bS;bQ={};bR=W.Get(bP);try{while(bR.MoveNext()){bS=bR.Current();bQ[bS[0]]=bS[1];}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return bQ;};w=v.List=bK.Class({GetEnumerator:function(){return W.Get(this);},GetEnumerator0:function(){return W.Get0(this);}},null,w);x.Equals=function(bP,bQ){var bR,bS,bT,bU;if(bP===bQ)return true;else{bR=typeof bP;if(bR=="object"){if(bP===null||bP===void 0||bQ===null||bQ===void 0)return false;else if("Equals"in bP)return bP.Equals(bQ);else if(bP instanceof a.Array&&bQ instanceof a.Array)return x.arrayEquals(bP,bQ);else if(bP instanceof a.Date&&bQ instanceof a.Date)return x.dateEquals(bP,bQ);else{bS=[true];for(var bV in bP)if(function(bW){bS[0]=!bP.hasOwnProperty(bW)||bQ.hasOwnProperty(bW)&&x.Equals(bP[bW],bQ[bW]);return!bS[0];}(bV))break;if(bS[0]){for(var bW in bQ)if(function(bX){bS[0]=!bQ.hasOwnProperty(bX)||bP.hasOwnProperty(bX);return!bS[0];}(bW))break;}return bS[0];}}else return bR=="function"&&("$Func"in bP?bP.$Func===bQ.$Func&&bP.$Target===bQ.$Target:"$Invokes"in bP&&"$Invokes"in bQ&&x.arrayEquals(bP.$Invokes,bQ.$Invokes));}};x.arrayEquals=function(bP,bQ){var bR,bS;if(j.length(bP)===j.length(bQ)){bR=true;bS=0;while(bR&&bS<j.length(bP)){!x.Equals(j.get(bP,bS),j.get(bQ,bS))?bR=false:void 0;bS=bS+1;}return bR;}else return false;};x.dateEquals=function(bP,bQ){return bP.getTime()===bQ.getTime();};x.Hash=function(bP){var bQ;bQ=typeof bP;return bQ=="function"?0:bQ=="boolean"?bP?1:0:bQ=="number"?bP:bQ=="string"?x.hashString(bP):bQ=="object"?bP==null?0:bP instanceof a.Array?x.hashArray(bP):x.hashObject(bP):0;};x.hashString=function(bP){var bQ,bR,bS;if(bP===null)return 0;else{bQ=5381;for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ=x.hashMix(bQ,bP[bR].charCodeAt());return bQ;}};x.hashArray=function(bP){var bQ,bR,bS;bQ=-34948909;for(bR=0,bS=j.length(bP)-1;bR<=bS;bR++)bQ=x.hashMix(bQ,x.Hash(j.get(bP,bR)));return bQ;};x.hashObject=function(bP){var bQ,bR;if("GetHashCode"in bP)return bP.GetHashCode();else{bQ=[0];for(var bS in bP)if(function(bT){bQ[0]=x.hashMix(x.hashMix(bQ[0],x.hashString(bT)),x.Hash(bP[bT]));return false;}(bS))break;return bQ[0];}};x.hashMix=function(bP,bQ){return(bP<<5)+bP+bQ;};x.Compare=function(bP,bQ){var bR,bS,bT,bU,bV,bW;if(bP===bQ)return 0;else{bS=typeof bP;switch(bS=="function"?1:bS=="boolean"?2:bS=="number"?2:bS=="string"?2:bS=="object"?3:0){case 0:return typeof bQ=="undefined"?0:-1;case 1:return e.FailWith("Cannot compare function values.");case 2:return bP<bQ?-1:1;case 3:if(bP===null)bT=-1;else if(bQ===null)bT=1;else if("CompareTo"in bP)bT=bP.CompareTo(bQ);else if("CompareTo0"in bP)bT=bP.CompareTo0(bQ);else if(bP instanceof a.Array&&bQ instanceof a.Array)bT=x.compareArrays(bP,bQ);else if(bP instanceof a.Date&&bQ instanceof a.Date)bT=x.compareDates(bP,bQ);else{bU=[0];for(var bX in bP)if(function(bY){return!bP.hasOwnProperty(bY)?false:!bQ.hasOwnProperty(bY)?(bU[0]=1,true):(bU[0]=x.Compare(bP[bY],bQ[bY]),bU[0]!==0);}(bX))break;if(bU[0]===0){for(var bY in bQ)if(function(bZ){return!bQ.hasOwnProperty(bZ)?false:!bP.hasOwnProperty(bZ)&&(bU[0]=-1,true);}(bY))break;}bT=bU[0];}return bT;}}};x.compareArrays=function(bP,bQ){var bR,bS;if(j.length(bP)<j.length(bQ))return -1;else if(j.length(bP)>j.length(bQ))return 1;else{bR=0;bS=0;while(bR===0&&bS<j.length(bP)){bR=x.Compare(j.get(bP,bS),j.get(bQ,bS));bS=bS+1;}return bR;}};x.compareDates=function(bP,bQ){return x.Compare(bP.getTime(),bQ.getTime());};z.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bP){var bQ,bR;bQ=bM.random()*16|0;bR=bP=="x"?bQ:bQ&3|8;return bR.toString(16);});};A.$cctor=function(){A.$cctor=a.ignore;A.editedText=s.Create$1("Hello blogger!");};B.Const=function(bP){var bQ;bQ=Q.New({$:0,$0:bP});return function(){return bQ;};};B.Map=function(bP,bQ){return B.CreateLazy(function(){return Q.Map(bP,bQ());});};B.Bind=function(bP,bQ){return B.Join(B.Map(bP,bQ));};B.CreateLazy=function(bP){var bQ;bQ={c:null,o:bP};return function(){var bR,bS;bR=bQ.c;return bR===null?(bR=bQ.o(),bQ.c=bR,(bS=bR.s,bS!=null&&bS.$==0)?bQ.o=null:Q.WhenObsoleteRun(bR,function(){bQ.c=null;}),bR):bR;};};B.Sink=function(bP,bQ){function bR(){Q.WhenRun(bQ(),bP,function(){bq.scheduler().Fork(bR);});}bq.scheduler().Fork(bR);};B.Join=function(bP){return B.CreateLazy(function(){return Q.Join(bP());});};B.Map3=function(bP,bQ,bR,bS){return B.CreateLazy(function(){return Q.Map3(bP,bQ(),bR(),bS());});};B.Sequence=function(bP){return B.CreateLazy(function(){return Q.Sequence(J.map(function(bQ){return bQ();},bP));});};B.Map2=function(bP,bQ,bR){return B.CreateLazy(function(){return Q.Map2(bP,bQ(),bR());});};B.Map2Unit=function(bP,bQ){return B.CreateLazy(function(){return Q.Map2Unit(bP(),bQ());});};C.MapTreeReduce=function(bP,bQ,bR,bS){var bT;function bU(bV,bW){var bX,bY;return bW<=0?bQ:bW===1&&(bV>=0&&bV<bT)?bP(j.get(bS,bV)):(bY=bW/2>>0,bR(bU(bV,bY),bU(bV+bY,bW-bY)));}bT=j.length(bS);return bU(0,bT);};C.TreeReduce=function(bP,bQ,bR){var bS;function bT(bU,bV){var bW,bX;return bV<=0?bP:bV===1&&(bU>=0&&bU<bS)?j.get(bR,bU):(bX=bV/2>>0,bQ(bT(bU,bX),bT(bU+bX,bV-bX)));}bS=j.length(bR);return bT(0,bS);};C.ofSeqNonCopying=function(bP){var bQ,bR;if(bP instanceof a.Array)return bP;else if(bP instanceof bh)return j.ofList(bP);else if(bP===null)return[];else{bQ=[];bR=W.Get(bP);try{while(bR.MoveNext())bQ.push(bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};E.CreateElemNode=function(bP,bQ,bR){var bS;E.LinkElement(bP,bR);bS=S.Insert(bP,bQ);return O.New(bS,bR,null,bP,U.Int(),bK.GetOptional(bS.OnAfterRender));};E.LinkElement=function(bP,bQ){E.InsertDoc(bP,bQ,null);};E.InsertDoc=function(bP,bQ,bR){var bS;return bQ!=null&&bQ.$==1?E.InsertNode(bP,bQ.$0.El,bR):bQ!=null&&bQ.$==2?(bS=bQ.$0,(bS.Dirty=false,E.InsertDoc(bP,bS.Current,bR))):bQ==null?bR:bQ!=null&&bQ.$==4?E.InsertNode(bP,bQ.$0.Text,bR):bQ!=null&&bQ.$==5?E.InsertNode(bP,bQ.$0,bR):bQ!=null&&bQ.$==6?j.foldBack(function(bT,bU){return bT==null||bT.constructor===P?E.InsertDoc(bP,bT,bU):E.InsertNode(bP,bT,bU);},bQ.$0.Els,bR):E.InsertDoc(bP,bQ.$0,E.InsertDoc(bP,bQ.$1,bR));};E.CreateEmbedNode=function(){return{Current:null,Dirty:false};};E.UpdateEmbedNode=function(bP,bQ){bP.Current=bQ;bP.Dirty=true;};E.InsertNode=function(bP,bQ,bR){_1.InsertAt(bP,bR,bQ);return bQ;};E.CreateRunState=function(bP,bQ){return bk.New(bl.get_Empty(),E.CreateElemNode(bP,S.EmptyAttr(),bQ));};E.PerformAnimatedUpdate=function(bP,bQ,bR){var bS;return bb.get_UseAnimations()?(bS=null,bq.Delay(function(){var bT,bU,bV;bT=bl.FindAll(bR);bU=E.ComputeChangeAnim(bQ,bT);bV=E.ComputeEnterAnim(bQ,bT);return bq.Bind(bb.Play(bb.Append(bU,E.ComputeExitAnim(bQ,bT))),function(){return bq.Bind(E.SyncElemNodesNextFrame(bP,bQ),function(){return bq.Bind(bb.Play(bV),function(){bQ.PreviousNodes=bT;return bq.Return(null);});});});})):E.SyncElemNodesNextFrame(bP,bQ);};E.PerformSyncUpdate=function(bP,bQ,bR){var bS;bS=bl.FindAll(bR);E.SyncElemNode(bP,bQ.Top);bQ.PreviousNodes=bS;};E.InsertBeforeDelim=function(bP,bQ){var bR,bS;bR=bP.parentNode;bS=self.document.createTextNode("");bR.insertBefore(bS,bP);E.LinkPrevElement(bP,bQ);return bS;};E.SyncElemNodesNextFrame=function(bP,bQ){function bR(bS){a.requestAnimationFrame(function(){E.SyncElemNode(bP,bQ.Top);bS();});}return bc.BatchUpdatesEnabled()?bq.FromContinuations(function(bS,bT,bU){return bR.apply(null,[bS,bT,bU]);}):(E.SyncElemNode(bP,bQ.Top),bq.Return(null));};E.ComputeExitAnim=function(bP,bQ){return bb.Concat(j.map(function(bR){return S.GetExitAnim(bR.Attr);},bl.ToArray(bl.Except(bQ,bl.Filter(function(bR){return S.HasExitAnim(bR.Attr);},bP.PreviousNodes)))));};E.ComputeEnterAnim=function(bP,bQ){return bb.Concat(j.map(function(bR){return S.GetEnterAnim(bR.Attr);},bl.ToArray(bl.Except(bP.PreviousNodes,bl.Filter(function(bR){return S.HasEnterAnim(bR.Attr);},bQ)))));};E.ComputeChangeAnim=function(bP,bQ){var bR;function bS(bT){return S.HasChangeAnim(bT.Attr);}bR=function(bT){return bl.Filter(bS,bT);};return bb.Concat(j.map(function(bT){return S.GetChangeAnim(bT.Attr);},bl.ToArray(bl.Intersect(bR(bP.PreviousNodes),bR(bQ)))));};E.SyncElemNode=function(bP,bQ){!bP?E.SyncElement(bQ):void 0;E.Sync(bQ.Children);E.AfterRender(bQ);};E.CreateTextNode=function(){return{Text:_1.CreateText(""),Dirty:false,Value:""};};E.UpdateTextNode=function(bP,bQ){bP.Value=bQ;bP.Dirty=true;};E.LinkPrevElement=function(bP,bQ){E.InsertDoc(bP.parentNode,bQ,bP);};E.SyncElement=function(bP){function bQ(bR){function bS(bT){var bU,bV;return bT!=null&&bT.$==0?bS(bT.$0)||bS(bT.$1):bT!=null&&bT.$==2?(bU=bT.$0,bU.Dirty||bS(bU.Current)):bT!=null&&bT.$==6&&(bV=bT.$0,bV.Dirty||j.exists(bQ,bV.Holes));}return bS(bR.Children);}S.Sync(bP.El,bP.Attr);bQ(bP)?E.DoSyncElement(bP):void 0;};E.Sync=function(bP){var bQ,bR;if(bP!=null&&bP.$==1)E.SyncElemNode(false,bP.$0);else if(bP!=null&&bP.$==2)E.Sync(bP.$0.Current);else if(bP==null);else if(bP!=null&&bP.$==5);else if(bP!=null&&bP.$==4){bQ=bP.$0;bQ.Dirty?(bQ.Text.nodeValue=bQ.Value,bQ.Dirty=false):void 0;}else if(bP!=null&&bP.$==6){bR=bP.$0;j.iter(function(bS){E.SyncElemNode(false,bS);},bR.Holes);j.iter(function(bS){S.Sync(bS[0],bS[1]);},bR.Attrs);E.AfterRender(bR);}else{E.Sync(bP.$0);E.Sync(bP.$1);}};E.AfterRender=function(bP){var bQ;bQ=bK.GetOptional(bP.Render);bQ!=null&&bQ.$==1?(bQ.$0(bP.El),bK.SetOptional(bP,"Render",null)):void 0;};E.DoSyncElement=function(bP){var bQ,bR,bS;function bT(bU,bV){var bW,bX;return bU!=null&&bU.$==1?bU.$0.El:bU!=null&&bU.$==2?(bW=bU.$0,bW.Dirty?(bW.Dirty=false,E.InsertDoc(bQ,bW.Current,bV)):bT(bW.Current,bV)):bU==null?bV:bU!=null&&bU.$==4?bU.$0.Text:bU!=null&&bU.$==5?bU.$0:bU!=null&&bU.$==6?(bX=bU.$0,(bX.Dirty?bX.Dirty=false:void 0,j.foldBack(function(bY,bZ){return bY==null||bY.constructor===P?bT(bY,bZ):bY;},bX.Els,bV))):bT(bU.$0,bT(bU.$1,bV));}bQ=bP.El;bC.Iter((bR=bP.El,function(bU){_1.RemoveNode(bR,bU);}),bC.Except(bC.DocChildren(bP),bC.Children(bP.El,bK.GetOptional(bP.Delimiters))));bT(bP.Children,(bS=bK.GetOptional(bP.Delimiters),bS!=null&&bS.$==1?bS.$0[1]:null));};F=g.AttrProxy=bK.Class({},null,F);F.Handler=function(bP,bQ){return F.HandlerImpl(bP,bQ);};F.Concat=function(bP){var bQ;bQ=C.ofSeqNonCopying(bP);return C.TreeReduce(S.EmptyAttr(),F.Append,bQ);};F.Create=function(bP,bQ){return S.Static(function(bR){_1.SetAttr(bR,bP,bQ);});};F.HandlerImpl=function(bP,bQ){return S.Static(function(bR){bR.addEventListener(bP,function(bS){return(bQ(bR))(bS);},false);});};F.Append=function(bP,bQ){return S.AppendTree(bP,bQ);};G=v.Dictionary=bK.Class({set_Item:function(bP,bQ){this.set(bP,bQ);},set:function(bP,bQ){var bR,bS,bT,bU;bR=this;bS=this.hash(bP);bT=this.data[bS];bT==null?(this.count=this.count+1,this.data[bS]=new a.Array({K:bP,V:bQ})):(bU=j.tryFindIndex(function(bV){return bR.equals.apply(null,[(e.KeyValue(bV))[0],bP]);},bT),bU==null?(this.count=this.count+1,bT.push({K:bP,V:bQ})):bT[bU.$0]={K:bP,V:bQ});},TryGetValue:function(bP,bQ){var bR,bS,bT;bR=this;bS=this.data[this.hash(bP)];return bS==null?false:(bT=j.tryPick(function(bU){var bV;bV=e.KeyValue(bU);return bR.equals.apply(null,[bV[0],bP])?{$:1,$0:bV[1]}:null;},bS),bT!=null&&bT.$==1&&(bQ.set(bT.$0),true));},ContainsKey:function(bP){var bQ,bR;bQ=this;bR=this.data[this.hash(bP)];return bR==null?false:j.exists(function(bS){return bQ.equals.apply(null,[(e.KeyValue(bS))[0],bP]);},bR);},Remove:function(bP){return this.remove(bP);},get_Keys:function(){return new ba.New(this);},remove:function(bP){var bQ,bR,bS,bT;bQ=this;bR=this.hash(bP);bS=this.data[bR];return bS==null?false:(bT=j.filter(function(bU){return!bQ.equals.apply(null,[(e.KeyValue(bU))[0],bP]);},bS),j.length(bT)<bS.length&&(this.count=this.count-1,this.data[bR]=bT,true));},get_Item:function(bP){return this.get(bP);},get:function(bP){var bQ,bR;bQ=this;bR=this.data[this.hash(bP)];return bR==null?V.notPresent():j.pick(function(bS){var bT;bT=e.KeyValue(bS);return bQ.equals.apply(null,[bT[0],bP])?{$:1,$0:bT[1]}:null;},bR);},GetEnumerator:function(){return W.Get0(this);},GetEnumerator0:function(){return W.Get0(j.concat(R.GetFieldValues(this.data)));}},f,G);G.New$5=bK.Ctor(function(){G.New$6.call(this,[],x.Equals,x.Hash);},G);G.New$6=bK.Ctor(function(bP,bQ,bR){var bS,bT;f.New.call(this);this.equals=bQ;this.hash=bR;this.count=0;this.data=[];bS=W.Get(bP);try{while(bS.MoveNext()){bT=bS.Current();this.set(bT.K,bT.V);}}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},G);H=v.HashSet=bK.Class({Add:function(bP){return this.add(bP);},Contains:function(bP){var bQ;bQ=this.data[this.hash(bP)];return bQ==null?false:this.arrContains(bP,bQ);},add:function(bP){var bQ,bR;bQ=this.hash(bP);bR=this.data[bQ];return bR==null?(this.data[bQ]=[bP],this.count=this.count+1,true):this.arrContains(bP,bR)?false:(bR.push(bP),this.count=this.count+1,true);},arrContains:function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=bQ.length;while(bR&&bS<bU)if(this.equals.apply(null,[bQ[bS],bP]))bR=false;else bS=bS+1;return!bR;},ExceptWith:function(bP){var bQ;bQ=W.Get(bP);try{while(bQ.MoveNext())this.Remove(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bP){var bQ,bR,bS,bT;bQ=0;bR=be.concat(this.data);for(bS=0,bT=bR.length-1;bS<=bT;bS++)j.set(bP,bS,bR[bS]);},IntersectWith:function(bP){var bQ,bR,bS,bT,bU;bQ=new H.New$4(bP,this.equals,this.hash);bR=be.concat(this.data);for(bS=0,bT=bR.length-1;bS<=bT;bS++){bU=bR[bS];!bQ.Contains(bU)?this.Remove(bU):void 0;}},Remove:function(bP){var bQ;bQ=this.data[this.hash(bP)];return bQ==null?false:this.arrRemove(bP,bQ)&&(this.count=this.count-1,true);},arrRemove:function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=bQ.length;while(bR&&bS<bU)if(this.equals.apply(null,[bQ[bS],bP])){bQ.splice.apply(bQ,[bS,1]);bR=false;}else bS=bS+1;return!bR;},GetEnumerator:function(){return W.Get(be.concat(this.data));},GetEnumerator0:function(){return W.Get(be.concat(this.data));}},f,H);H.New$3=bK.Ctor(function(){H.New$4.call(this,[],x.Equals,x.Hash);},H);H.New$4=bK.Ctor(function(bP,bQ,bR){var bS;f.New.call(this);this.equals=bQ;this.hash=bR;this.data=[];this.count=0;bS=W.Get(bP);try{while(bS.MoveNext())this.add(bS.Current());}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}},H);H.New$2=bK.Ctor(function(bP){H.New$4.call(this,bP,x.Equals,x.Hash);},H);I.Box=a.id;J.append=function(bP,bQ){return{GetEnumerator:function(){var bR,bS;bR=W.Get(bP);bS=[true];return new X.New(bR,null,function(bT){var bU;return bT.s.MoveNext()?(bT.c=bT.s.Current(),true):(bU=bT.s,!x.Equals(bU,null)?bU.Dispose():void 0,bT.s=null,bS[0]&&(bS[0]=false,bT.s=W.Get(bQ),bT.s.MoveNext()?(bT.c=bT.s.Current(),true):(bT.s.Dispose(),bT.s=null,false)));},function(bT){var bU;bU=bT.s;!x.Equals(bU,null)?bU.Dispose():void 0;});}};};J.iter=function(bP,bQ){var bR;bR=W.Get(bQ);try{while(bR.MoveNext())bP(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};J.head=function(bP){var bQ;bQ=W.Get(bP);try{return bQ.MoveNext()?bQ.Current():J.insufficient();}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};J.fold=function(bP,bQ,bR){var bS,bT;bS=bQ;bT=W.Get(bR);try{while(bT.MoveNext())bS=bP(bS,bT.Current());return bS;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}};J.map=function(bP,bQ){return{GetEnumerator:function(){var bR;bR=W.Get(bQ);return new X.New(null,null,function(bS){return bR.MoveNext()&&(bS.c=bP(bR.Current()),true);},function(){bR.Dispose();});}};};J.forall=function(bP,bQ){return!J.exists(function(bR){return!bP(bR);},bQ);};J.max=function(bP){var bQ,bR,bS;bQ=W.Get(bP);try{if(!bQ.MoveNext())J.seqEmpty();bR=bQ.Current();while(bQ.MoveNext()){bS=bQ.Current();x.Compare(bS,bR)===1?bR=bS:void 0;}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};J.exists=function(bP,bQ){var bR,bS;bR=W.Get(bQ);try{bS=false;while(!bS&&bR.MoveNext())bS=bP(bR.Current());return bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};J.seqEmpty=function(){return e.FailWith("The input sequence was empty.");};j.choose=function(bP,bQ){var bR,bS,bT,bU;bR=[];for(bS=0,bT=bQ.length-1;bS<=bT;bS++){bU=bP(bQ[bS]);bU==null?void 0:bR.push(bU.$0);}return bR;};j.tryFindIndex=function(bP,bQ){var bR,bS;bR=null;bS=0;while(bS<bQ.length&&bR==null){bP(bQ[bS])?bR={$:1,$0:bS}:void 0;bS=bS+1;}return bR;};j.foldBack=function(bP,bQ,bR){var bS,bT,bU,bV,bW;bS=bR;bU=bQ.length;for(bV=1,bW=bU;bV<=bW;bV++)bS=bP(bQ[bU-bV],bS);return bS;};j.tryPick=function(bP,bQ){var bR,bS,bT;bR=null;bS=0;while(bS<bQ.length&&bR==null){bT=bP(bQ[bS]);bT!=null&&bT.$==1?bR=bT:void 0;bS=bS+1;}return bR;};j.exists=function(bP,bQ){var bR,bS,bT,bU;bR=false;bS=0;bU=j.length(bQ);while(!bR&&bS<bU)if(bP(bQ[bS]))bR=true;else bS=bS+1;return bR;};j.concat=function(bP){return a.Array.prototype.concat.apply([],j.ofSeq(bP));};j.iter=function(bP,bQ){var bR,bS;for(bR=0,bS=bQ.length-1;bR<=bS;bR++)bP(bQ[bR]);};j.map=function(bP,bQ){var bR,bS,bT;bR=new a.Array(bQ.length);for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS]=bP(bQ[bS]);return bR;};j.filter=function(bP,bQ){var bR,bS,bT;bR=[];for(bS=0,bT=bQ.length-1;bS<=bT;bS++)if(bP(bQ[bS]))bR.push(bQ[bS]);return bR;};j.ofSeq=function(bP){var bQ,bR;if(bP instanceof a.Array)return bP.slice();else if(bP instanceof bh)return j.ofList(bP);else{bQ=[];bR=W.Get(bP);try{while(bR.MoveNext())bQ.push(bR.Current());return bQ;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};j.pick=function(bP,bQ){var bR;bR=j.tryPick(bP,bQ);return bR==null?e.FailWith("KeyNotFoundException"):bR.$0;};j.ofList=function(bP){var bQ,bR;bR=[];bQ=bP;while(!(bQ.$==0)){bR.push(bg.head(bQ));bQ=bg.tail(bQ);}return bR;};j.forall=function(bP,bQ){var bR,bS,bT,bU;bR=true;bS=0;bU=j.length(bQ);while(bR&&bS<bU)if(bP(bQ[bS]))bS=bS+1;else bR=false;return bR;};j.create=function(bP,bQ){var bR,bS,bT;bR=new a.Array(bP);for(bS=0,bT=bP-1;bS<=bT;bS++)bR[bS]=bQ;return bR;};j.init=function(bP,bQ){var bR,bS,bT;bP<0?e.FailWith("Negative size given."):null;bR=new a.Array(bP);for(bS=0,bT=bP-1;bS<=bT;bS++)bR[bS]=bQ(bS);return bR;};L.LoadLocalTemplates=function(bP){!L.LocalTemplatesLoaded()?(L.set_LocalTemplatesLoaded(true),L.LoadNestedTemplates(self.document.body,"")):void 0;L.LoadedTemplates().set_Item(bP,L.LoadedTemplateFile(""));};L.NamedTemplate=function(bP,bQ,bR){var bS,bT;bS=(bT=null,[L.LoadedTemplateFile(bP).TryGetValue(bQ==null?"":bQ.$0,{get:function(){return bT;},set:function(bU){bT=bU;}}),bT]);return bS[0]?L.ChildrenTemplate(bS[1].cloneNode(true),bR):(bN.warn("Local template doesn't exist",bQ),h.get_Empty());};L.LocalTemplatesLoaded=function(){_6.$cctor();return _6.LocalTemplatesLoaded;};L.set_LocalTemplatesLoaded=function(bP){_6.$cctor();_6.LocalTemplatesLoaded=bP;};L.LoadNestedTemplates=function(bP,bQ){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5;function bR(b6){var b7,b8;if(!bS.ContainsKey(b6)){b7=(b8=null,[bT.TryGetValue(b6,{get:function(){return b8;},set:function(b9){b8=b9;}}),b8]);b7[0]?(b5.Add(b6),bT.Remove(b6),L.PrepareTemplateStrict(bQ,{$:1,$0:b6},b7[1][0],{$:1,$0:b7[1][1]},{$:1,$0:bR})):bN.warn(b5.Contains(b6)?"Encountered loop when instantiating "+b6:"Local template does not exist: "+b6);}}bS=L.LoadedTemplateFile(bQ);bT=new G.New$5();bU=bP.querySelectorAll("[ws-template]");for(bV=0,bW=bU.length-1;bV<=bW;bV++){bX=bU[bV];bY=bX.getAttribute("ws-template").toLowerCase();bX.removeAttribute("ws-template");bT.set_Item(bY,[[bX],L.FakeRootSingle(bX)]);}bZ=bP.querySelectorAll("[ws-children-template]");for(b0=0,b1=bZ.length-1;b0<=b1;b0++){b2=bZ[b0];b3=b2.getAttribute("ws-children-template").toLowerCase();b2.removeAttribute("ws-children-template");bT.set_Item(b3,(b4=_1.ChildrenArray(b2),[b4,L.FakeRoot(b4)]));}b5=new H.New$3();while(bT.count>0)bR(J.head(bT.get_Keys()));};L.LoadedTemplates=function(){_6.$cctor();return _6.LoadedTemplates;};L.LoadedTemplateFile=function(bP){var bQ,bR,bS;bQ=(bR=null,[L.LoadedTemplates().TryGetValue(bP,{get:function(){return bR;},set:function(bT){bR=bT;}}),bR]);return bQ[0]?bQ[1]:(bS=new G.New$5(),(L.LoadedTemplates().set_Item(bP,bS),bS));};L.ChildrenTemplate=function(bP,bQ){var bR,bS,bT,bU,bV;bR=L.InlineTemplate(bP,bQ);bS=bR[1];bT=bR[0];bU=bT.Els;return!x.Equals(bU,null)&&bU.length===1&&(j.get(bU,0)instanceof N&&(x.Equals(j.get(bU,0).nodeType,N.ELEMENT_NODE)&&(bV=j.get(bU,0),true)))?i.TreeNode(bT,bS):h.Mk({$:6,$0:bT},bS);};L.FakeRootSingle=function(bP){var bQ,bR,bS;bP.removeAttribute("ws-template");bQ=bP.getAttribute("ws-replace");bQ===null?void 0:(bP.removeAttribute("ws-replace"),bR=bP.parentNode,x.Equals(bR,null)?void 0:(bS=self.document.createElement(bP.tagName),bS.setAttribute("ws-replace",bQ),bR.replaceChild(bS,bP)));return L.FakeRoot([bP]);};L.FakeRoot=function(bP){var bQ,bR,bS;bQ=self.document.createElement("div");for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ.appendChild(j.get(bP,bR));return bQ;};L.PrepareTemplateStrict=function(bP,bQ,bR,bS,bT){var bU,bV;function bW(b1,b2){var b3,b4,b5,b6,b7,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr;function b8(cs){}while(true)switch(b1){case 0:if(b2!==null){b3=b2.nextSibling;if(x.Equals(b2.nodeType,N.TEXT_NODE))_.convertTextNode(b2);else if(x.Equals(b2.nodeType,N.ELEMENT_NODE))bY(b2);b2=b3;}else return null;break;case 1:b9=$.string(b2.nodeName,{$:1,$0:3},null).toLowerCase();b_=(b4=b9.indexOf("."),b4===-1?[bP,b9]:[$.string(b9,null,{$:1,$0:b4-1}),$.string(b9,{$:1,$0:b4+1},null)]);b$=b_[1];ca=b_[0];if(ca!==""&&!L.LoadedTemplates().ContainsKey(ca))return _.failNotLoaded(b$);else{if(ca===""&&bT!=null)bT.$0(b$);cb=L.LoadedTemplates().get_Item(ca);if(!cb.ContainsKey(b$))return _.failNotLoaded(b$);else{cc=cb.get_Item(b$);cd=cc.cloneNode(true);ce=new H.New$3();cf=new G.New$5();cg=b2.attributes;for(ch=0,ci=cg.length-1;ch<=ci;ch++){cj=cg.item(ch).name.toLowerCase();cf.set_Item(cj,(ck=cg.item(ch).nodeValue,ck===""?cj:ck.toLowerCase()));!ce.Add(cj)?bN.warn("Hole mapped twice",cj):void 0;}for(cl=0,cm=b2.childNodes.length-1;cl<=cm;cl++){cn=b2.childNodes[cl];x.Equals(cn.nodeType,N.ELEMENT_NODE)?!ce.Add(cn.nodeName.toLowerCase())?bN.warn("Hole filled twice",b$):void 0:void 0;}co=b2.childNodes.length===1&&x.Equals(b2.firstChild.nodeType,N.TEXT_NODE);if(co){b6=_.fillTextHole(cd,b2.firstChild.textContent,b$);((function(cs){return function(ct){if(ct!=null)cs(ct.$0);};}((b7=function(cs){return function(ct){return cs.Add(ct);};}(ce),function(cs){return b8(b7(cs));})))(b6));}_.removeHolesExcept(cd,ce);if(!co){for(cp=0,cq=b2.childNodes.length-1;cp<=cq;cp++){cr=b2.childNodes[cp];x.Equals(cr.nodeType,N.ELEMENT_NODE)?cr.hasAttributes()?_.fillInstanceAttrs(cd,cr):bX(cd,cr):void 0;}}_.mapHoles(cd,cf);_.fill(cd,b2.parentNode,b2);b2.parentNode.removeChild(b2);return;}}break;}}function bX(b1,b2){var b3,b5,b6;function b4(b7,b8){var b9,b_,b$;if(b5==="title"&&b2.hasChildNodes()){b9=bL.parseHTML(b2.textContent);b2.removeChild(b2.firstChild);for(b_=0,b$=b9.length-1;b_<=b$;b_++)b2.appendChild(j.get(b9,b_));}else null;bY(b2);return _.fill(b2,b7,b8);}b5=b2.nodeName.toLowerCase();_1.IterSelector(b1,"[ws-attr-holes]",function(b7){var b8,b9,b_,b$,ca;b8=bi.SplitChars(b7.getAttribute("ws-attr-holes"),[" "],1);for(b9=0,b_=b8.length-1;b9<=b_;b9++){b$=j.get(b8,b9);b7.setAttribute(b$,(ca=new a.RegExp("\\${"+b5+"}","ig"),b7.getAttribute(b$).replace(ca,b2.textContent)));}});b6=b1.querySelector("[ws-hole="+b5+"]");if(x.Equals(b6,null)){b3=b1.querySelector("[ws-replace="+b5+"]");return x.Equals(b3,null)?null:(b4(b3.parentNode,b3),void b3.parentNode.removeChild(b3));}else{while(b6.hasChildNodes())b6.removeChild(b6.lastChild);b6.removeAttribute("ws-hole");return b4(b6,null);}}function bY(b1){if(bi.StartsWith(b1.nodeName.toLowerCase(),"ws-"))b0(b1);else{_.convertAttrs(b1);bZ(b1.firstChild);}}function bZ(b1){return bW(0,b1);}function b0(b1){return bW(1,b1);}bU=bS==null?L.FakeRoot(bR):bS.$0;bV=(bQ==null?"":bQ.$0).toLowerCase();L.LoadedTemplateFile(bP).set_Item(bV,bU);j.length(bR)>0?(function(b1){var b2,b3,b4,b5;while(true){b2=b1.querySelector("[ws-template]");if(x.Equals(b2,null)){b3=b1.querySelector("[ws-children-template]");if(x.Equals(b3,null))return null;else{b4=b3.getAttribute("ws-children-template");b3.removeAttribute("ws-children-template");L.PrepareTemplateStrict(bP,{$:1,$0:b4},_1.ChildrenArray(b3),null,null);b1=b1;}}else{b5=b2.getAttribute("ws-template");(L.PrepareSingleTemplate(bP,{$:1,$0:b5},b2))(null);b1=b1;}}}(bU),bZ(j.get(bR,0))):void 0;};L.InlineTemplate=function(bP,bQ){var bR,bS,bT,bU,bX,bY,bZ,b0,b1,b2,b3;function bV(b4,b5){var b6,b7,b8;b6=S.Insert(b4,b5);bY.push(S.Updates(b6));bZ.push([b4,b6]);b7=bK.GetOptional(b6.OnAfterRender);return b7==null?null:(b8=b7.$0,void b0.push(function(){b8(b4);}));}function bW(b4){var b5,b6;b5=(b6=null,[b1.TryGetValue(b4,{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]);return b5[0]?b5[1].$==0?{$:1,$0:b5[1].$1}:b5[1].$==1?{$:1,$0:h.TextNode(b5[1].$1)}:b5[1].$==2?{$:1,$0:h.TextView(b5[1].$1)}:b5[1].$==8?{$:1,$0:h.TextView(b5[1].$1.get_View())}:b5[1].$==9?{$:1,$0:h.TextView(B.Map(a.String,b5[1].$1.get_View()))}:b5[1].$==10?{$:1,$0:h.TextView(B.Map(function(b7){return b7.get_Input();},b5[1].$1.get_View()))}:b5[1].$==11?{$:1,$0:h.TextView(B.Map(a.String,b5[1].$1.get_View()))}:b5[1].$==12?{$:1,$0:h.TextView(B.Map(function(b7){return b7.get_Input();},b5[1].$1.get_View()))}:b5[1].$==13?{$:1,$0:h.TextView(B.Map(a.String,b5[1].$1.get_View()))}:(bN.warn("Content hole filled with attribute data",b4),null):null;}bX=[];bY=[];bZ=[];b0=[];b1=new G.New$5();b2=W.Get(bQ);try{while(b2.MoveNext()){b3=b2.Current();b1.set_Item(b3.$0,b3);}}finally{if(typeof b2=="object"&&"Dispose"in b2)b2.Dispose();}bR=_1.ChildrenArray(bP);_1.IterSelector(bP,"[ws-hole]",function(b4){var b5,b6,b7;b7=b4.getAttribute("ws-hole");b4.removeAttribute("ws-hole");while(b4.hasChildNodes())b4.removeChild(b4.lastChild);b5=bW(b7);b5!=null&&b5.$==1?(b6=b5.$0,E.LinkElement(b4,b6.docNode),bX.push(O.New(S.Empty(b4),b6.docNode,null,b4,U.Int(),null)),bY.push(b6.updates)):void 0;});_1.IterSelector(bP,"[ws-replace]",function(b4){var b5,b6,b7,b8,b9,b_;b5=bW(b4.getAttribute("ws-replace"));b5!=null&&b5.$==1?(b6=b5.$0,b7=b4.parentNode,b8=self.document.createTextNode(""),b7.replaceChild(b8,b4),b9=E.InsertBeforeDelim(b8,b6.docNode),b_=j.tryFindIndex(function(b$){return b4===b$;},bR),b_==null?void 0:j.set(bR,b_.$0,b6.docNode),bX.push(O.New(S.Empty(b7),b6.docNode,{$:1,$0:[b9,b8]},b7,U.Int(),null)),bY.push(b6.updates)):void 0;});_1.IterSelector(bP,"[ws-attr]",function(b4){var b5,b6,b7;b5=b4.getAttribute("ws-attr");b4.removeAttribute("ws-attr");b6=(b7=null,[b1.TryGetValue(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);b6[0]?b6[1].$==3?bV(b4,b6[1].$1):bN.warn("Attribute hole filled with non-attribute data",b5):void 0;});_1.IterSelector(bP,"[ws-on]",function(b4){bV(b4,F.Concat(j.choose(function(b5){var b6,b7,b8;b6=bi.SplitChars(b5,[":"],1);b7=(b8=null,[b1.TryGetValue(j.get(b6,1),{get:function(){return b8;},set:function(b9){b8=b9;}}),b8]);return b7[0]?b7[1].$==4?{$:1,$0:bf.Handler(j.get(b6,0),b7[1].$1)}:b7[1].$==5?{$:1,$0:F.Handler(j.get(b6,0),b7[1].$2)}:(bN.warn("Event hole on"+j.get(b6,0)+" filled with non-event data",j.get(b6,1)),null):null;},bi.SplitChars(b4.getAttribute("ws-on"),[" "],1))));b4.removeAttribute("ws-on");});_1.IterSelector(bP,"[ws-onafterrender]",function(b4){var b5,b6,b7;b5=b4.getAttribute("ws-onafterrender");b6=(b7=null,[b1.TryGetValue(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);b6[0]?b6[1].$==6?(b4.removeAttribute("ws-onafterrender"),bV(b4,bf.OnAfterRender(b6[1].$1))):b6[1].$==7?(b4.removeAttribute("ws-onafterrender"),bV(b4,bf.OnAfterRender(b6[1].$1))):bN.warn("onafterrender hole filled with non-onafterrender data",b5):void 0;});_1.IterSelector(bP,"[ws-var]",function(b4){var b5,b6,b7;b5=b4.getAttribute("ws-var");b4.removeAttribute("ws-var");b6=(b7=null,[b1.TryGetValue(b5,{get:function(){return b7;},set:function(b8){b7=b8;}}),b7]);b6[0]?b6[1].$==8?bV(b4,bf.Value(b6[1].$1)):b6[1].$==9?bV(b4,bf.Checked(b6[1].$1)):b6[1].$==10?bV(b4,bf.IntValue(b6[1].$1)):b6[1].$==11?bV(b4,bf.IntValueUnchecked(b6[1].$1)):b6[1].$==12?bV(b4,bf.FloatValue(b6[1].$1)):b6[1].$==13?bV(b4,bf.FloatValueUnchecked(b6[1].$1)):bN.warn("Var hole filled with non-Var data",b5):void 0;});_1.IterSelector(bP,"[ws-attr-holes]",function(b4){var b5,b6,b7,b8;b5=new a.RegExp(L.TextHoleRE(),"g");b6=bi.SplitChars(b4.getAttribute("ws-attr-holes"),[" "],1);b4.removeAttribute("ws-attr-holes");for(b7=0,b8=b6.length-1;b7<=b8;b7++)(function(){var b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj;cg=j.get(b6,b7);ch=b4.getAttribute(cg);b9=null;b_=0;ci=[];while(b9=b5.exec(ch),b9!==null){cj=$.string(ch,{$:1,$0:b_},{$:1,$0:b5.lastIndex-j.get(b9,0).length-1});b_=b5.lastIndex;ci.push([cj,j.get(b9,1)]);}ca=$.string(ch,{$:1,$0:b_},null);b5.lastIndex=0;cb=j.foldBack(function(ck,cl){return(function(cm){var cn,co;cn=cm[0];co=cm[1];return function(cp){var cq,cr,cs,ct,cu;cq=cp[0];cr=cp[1];cs=(ct=(cu=null,[b1.TryGetValue(co,{get:function(){return cu;},set:function(cv){cu=cv;}}),cu]),ct[0]?ct[1].$==1?{$:0,$0:ct[1].$1}:ct[1].$==2?{$:1,$0:ct[1].$1}:ct[1].$==8?{$:1,$0:ct[1].$1.get_View()}:ct[1].$==9?{$:1,$0:B.Map(a.String,ct[1].$1.get_View())}:ct[1].$==10?{$:1,$0:B.Map(function(cv){return cv.get_Input();},ct[1].$1.get_View())}:ct[1].$==11?{$:1,$0:B.Map(a.String,ct[1].$1.get_View())}:ct[1].$==12?{$:1,$0:B.Map(function(cv){return cv.get_Input();},ct[1].$1.get_View())}:ct[1].$==13?{$:1,$0:B.Map(a.String,ct[1].$1.get_View())}:(bN.warn("Attribute value hole filled with non-text data",co),{$:0,$0:""}):{$:0,$0:""});return cs.$==1?[cn,new bh({$:1,$0:cq===""?cs.$0:B.Map(function(cv){return cv+cq;},cs.$0),$1:cr})]:[cn+cs.$0+cq,cr];};}(ck))(cl);},ci,[ca,bh.Empty]);return bV(b4,cb[1].$==1?cb[1].$1.$==1?cb[1].$1.$1.$==1?cb[1].$1.$1.$1.$==0?(cc=cb[0],bf.Dynamic(cg,B.Map3(function(ck,cl,cm){return cc+ck+cl+cm;},cb[1].$0,cb[1].$1.$0,cb[1].$1.$1.$0))):(cd=cb[0],bf.Dynamic(cg,B.Map(function(ck){return cd+bi.concat("",ck);},B.Sequence(cb[1])))):(ce=cb[0],bf.Dynamic(cg,B.Map2(function(ck,cl){return ce+ck+cl;},cb[1].$0,cb[1].$1.$0))):cb[0]===""?bf.Dynamic(cg,cb[1].$0):(cf=cb[0],bf.Dynamic(cg,B.Map(function(ck){return cf+ck;},cb[1].$0))):F.Create(cg,cb[0]));}());});return[bK.DeleteEmptyFields({Els:bR,Dirty:true,Holes:bX,Attrs:bZ,Render:(bS=b0.length==0?null:{$:1,$0:function(b4){j.iter(function(b5){b5(b4);},b0);}},bS?bS.$0:void 0),El:(bT=!x.Equals(bR,null)&&bR.length===1&&(j.get(bR,0)instanceof N&&(j.get(bR,0)instanceof a.Element&&(bU=j.get(bR,0),true)))?{$:1,$0:bU}:null,bT?bT.$0:void 0)},["Render","El"]),C.TreeReduce(B.Const(),B.Map2Unit,bY)];};L.PrepareSingleTemplate=function(bP,bQ,bR){var bS,bT,bU;bS=L.FakeRootSingle(bR);bT=[bR];bU={$:1,$0:bS};return function(bV){L.PrepareTemplateStrict(bP,bQ,bT,bU,bV);};};L.TextHoleRE=function(){_6.$cctor();return _6.TextHoleRE;};B=g.View=bK.Class({},null,B);M=g.Updates=bK.Class({},null,M);M.Create=function(bP){var bQ;bQ=null;bQ=M.New(bP,null,function(){var bR;bR=bQ.s;return bR===null?(bR=Q.Copy(bQ.c()),bQ.s=bR,Q.WhenObsoleteRun(bR,function(){bQ.s=null;}),bR):bR;});return bQ;};M.New=function(bP,bQ,bR){return new M({c:bP,s:bQ,v:bR});};O=g.DocElemNode=bK.Class({Equals:function(bP){return this.ElKey===bP.ElKey;},GetHashCode:function(){return this.ElKey;}},null,O);O.New=function(bP,bQ,bR,bS,bT,bU){var bV;return new O((bV={Attr:bP,Children:bQ,El:bS,ElKey:bT},(bK.SetOptional(bV,"Delimiters",bR),bK.SetOptional(bV,"Render",bU),bV)));};Q.Map=function(bP,bQ){var bR,bS;bR=bQ.s;return bR!=null&&bR.$==0?Q.New({$:0,$0:bP(bR.$0)}):(bS=Q.New({$:3,$0:[],$1:[]}),(Q.When(bQ,function(bT){Q.MarkDone(bS,bQ,bP(bT));},bS),bS));};Q.WhenObsoleteRun=function(bP,bQ){var bR;bR=bP.s;bR==null?bQ():bR!=null&&bR.$==2?bR.$1.push(bQ):bR!=null&&bR.$==3?bR.$1.push(bQ):void 0;};Q.When=function(bP,bQ,bR){var bS;bS=bP.s;bS==null?Q.Obsolete(bR):bS!=null&&bS.$==2?(Q.EnqueueSafe(bS.$1,bR),bQ(bS.$0)):bS!=null&&bS.$==3?(bS.$0.push(bQ),Q.EnqueueSafe(bS.$1,bR)):bQ(bS.$0);};Q.MarkDone=function(bP,bQ,bR){var bS;if(bS=bQ.s,bS!=null&&bS.$==0)Q.MarkForever(bP,bR);else Q.MarkReady(bP,bR);};Q.WhenRun=function(bP,bQ,bR){var bS;bS=bP.s;bS==null?bR():bS!=null&&bS.$==2?(bS.$1.push(bR),bQ(bS.$0)):bS!=null&&bS.$==3?(bS.$0.push(bQ),bS.$1.push(bR)):bQ(bS.$0);};Q.Join=function(bP){var bQ;bQ=Q.New({$:3,$0:[],$1:[]});Q.When(bP,function(bR){var bS;bS=bR();Q.When(bS,function(bT){var bU,bV;if((bU=bS.s,bU!=null&&bU.$==0)&&(bV=bP.s,bV!=null&&bV.$==0))Q.MarkForever(bQ,bT);else Q.MarkReady(bQ,bT);},bQ);},bQ);return bQ;};Q.EnqueueSafe=function(bP,bQ){var bR,bS,bT,bU;bP.push(bQ);if(bP.length%20===0){bR=bP.slice(0);bz.Clear(bP);for(bS=0,bT=j.length(bR)-1;bS<=bT;bS++){bU=j.get(bR,bS);typeof bU=="object"?function(bV){if(bV.s)bP.push(bV);}(bU):function(bV){bP.push(bV);}(bU);}}else void 0;};Q.MarkForever=function(bP,bQ){var bR,bS,bT,bU;bR=bP.s;if(bR!=null&&bR.$==3){bP.s={$:0,$0:bQ};bS=bR.$0;for(bT=0,bU=j.length(bS)-1;bT<=bU;bT++)(j.get(bS,bT))(bQ);}else void 0;};Q.MarkReady=function(bP,bQ){var bR,bS,bT,bU;bR=bP.s;if(bR!=null&&bR.$==3){bP.s={$:2,$0:bQ,$1:bR.$1};bS=bR.$0;for(bT=0,bU=j.length(bS)-1;bT<=bU;bT++)(j.get(bS,bT))(bQ);}else void 0;};Q.Map3=function(bP,bQ,bR,bS){var bT,bU,bV,bW;function bX(bY){var bZ,b0,b1,b2;if(!(bZ=bW.s,bZ!=null&&bZ.$==0||bZ!=null&&bZ.$==2)){b0=Q.ValueAndForever(bQ);b1=Q.ValueAndForever(bR);b2=Q.ValueAndForever(bS);b0!=null&&b0.$==1?b1!=null&&b1.$==1?b2!=null&&b2.$==1?b0.$0[1]&&b1.$0[1]&&b2.$0[1]?Q.MarkForever(bW,bP(b0.$0[0],b1.$0[0],b2.$0[0])):Q.MarkReady(bW,bP(b0.$0[0],b1.$0[0],b2.$0[0])):void 0:void 0:void 0;}}bT=bQ.s;bU=bR.s;bV=bS.s;return bT!=null&&bT.$==0?bU!=null&&bU.$==0?bV!=null&&bV.$==0?Q.New({$:0,$0:bP(bT.$0,bU.$0,bV.$0)}):Q.Map3Opt1(bP,bT.$0,bU.$0,bS):bV!=null&&bV.$==0?Q.Map3Opt2(bP,bT.$0,bV.$0,bR):Q.Map3Opt3(bP,bT.$0,bR,bS):bU!=null&&bU.$==0?bV!=null&&bV.$==0?Q.Map3Opt4(bP,bU.$0,bV.$0,bQ):Q.Map3Opt5(bP,bU.$0,bQ,bS):bV!=null&&bV.$==0?Q.Map3Opt6(bP,bV.$0,bQ,bR):(bW=Q.New({$:3,$0:[],$1:[]}),(Q.When(bQ,bX,bW),Q.When(bR,bX,bW),Q.When(bS,bX,bW),bW));};Q.Sequence=function(bP){var bQ,bR,bS;function bT(bU){var bV;if(bS[0]===0){bV=j.map(function(bW){var bX;bX=bW.s;return bX!=null&&bX.$==0?bX.$0:bX!=null&&bX.$==2?bX.$0:e.FailWith("value not found by View.Sequence");},bQ);j.forall(function(bW){var bX;bX=bW.s;return bX!=null&&bX.$==0;},bQ)?Q.MarkForever(bR,bV):Q.MarkReady(bR,bV);}else bS[0]--;}bQ=j.ofSeq(bP);return bQ.length==0?Q.New({$:0,$0:[]}):(bR=Q.New({$:3,$0:[],$1:[]}),(bS=[j.length(bQ)-1],(j.iter(function(bU){Q.When(bU,bT,bR);},bQ),bR)));};Q.Map2=function(bP,bQ,bR){var bS,bT,bU;function bV(bW){var bX,bY,bZ;if(!(bX=bU.s,bX!=null&&bX.$==0||bX!=null&&bX.$==2)){bY=Q.ValueAndForever(bQ);bZ=Q.ValueAndForever(bR);bY!=null&&bY.$==1?bZ!=null&&bZ.$==1?bY.$0[1]&&bZ.$0[1]?Q.MarkForever(bU,bP(bY.$0[0],bZ.$0[0])):Q.MarkReady(bU,bP(bY.$0[0],bZ.$0[0])):void 0:void 0;}}bS=bQ.s;bT=bR.s;return bS!=null&&bS.$==0?bT!=null&&bT.$==0?Q.New({$:0,$0:bP(bS.$0,bT.$0)}):Q.Map2Opt1(bP,bS.$0,bR):bT!=null&&bT.$==0?Q.Map2Opt2(bP,bT.$0,bQ):(bU=Q.New({$:3,$0:[],$1:[]}),(Q.When(bQ,bV,bU),Q.When(bR,bV,bU),bU));};Q.Map2Unit=function(bP,bQ){var bR,bS,bT;function bU(){var bV,bW,bX;if(!(bV=bT.s,bV!=null&&bV.$==0||bV!=null&&bV.$==2)){bW=Q.ValueAndForever(bP);bX=Q.ValueAndForever(bQ);bW!=null&&bW.$==1?bX!=null&&bX.$==1?bW.$0[1]&&bX.$0[1]?Q.MarkForever(bT,null):Q.MarkReady(bT,null):void 0:void 0;}}bR=bP.s;bS=bQ.s;return bR!=null&&bR.$==0?bS!=null&&bS.$==0?Q.New({$:0,$0:null}):bQ:bS!=null&&bS.$==0?bP:(bT=Q.New({$:3,$0:[],$1:[]}),(Q.When(bP,bU,bT),Q.When(bQ,bU,bT),bT));};Q.Copy=function(bP){var bQ,bR,bS;bQ=bP.s;return bQ==null?bP:bQ!=null&&bQ.$==2?(bR=Q.New({$:2,$0:bQ.$0,$1:[]}),(Q.WhenObsolete(bP,bR),bR)):bQ!=null&&bQ.$==3?(bS=Q.New({$:3,$0:[],$1:[]}),(Q.When(bP,function(bT){Q.MarkDone(bS,bP,bT);},bS),bS)):bP;};Q.Map3Opt1=function(bP,bQ,bR,bS){return Q.Map(function(bT){return bP(bQ,bR,bT);},bS);};Q.Map3Opt2=function(bP,bQ,bR,bS){return Q.Map(function(bT){return bP(bQ,bT,bR);},bS);};Q.Map3Opt3=function(bP,bQ,bR,bS){return Q.Map2(function(bT,bU){return bP(bQ,bT,bU);},bR,bS);};Q.Map3Opt4=function(bP,bQ,bR,bS){return Q.Map(function(bT){return bP(bT,bQ,bR);},bS);};Q.Map3Opt5=function(bP,bQ,bR,bS){return Q.Map2(function(bT,bU){return bP(bT,bQ,bU);},bR,bS);};Q.Map3Opt6=function(bP,bQ,bR,bS){return Q.Map2(function(bT,bU){return bP(bT,bU,bQ);},bR,bS);};Q.ValueAndForever=function(bP){var bQ;bQ=bP.s;return bQ!=null&&bQ.$==0?{$:1,$0:[bQ.$0,true]}:bQ!=null&&bQ.$==2?{$:1,$0:[bQ.$0,false]}:null;};Q.Map2Opt1=function(bP,bQ,bR){return Q.Map(function(bS){return bP(bQ,bS);},bR);};Q.Map2Opt2=function(bP,bQ,bR){return Q.Map(function(bS){return bP(bS,bQ);},bR);};Q.WhenObsolete=function(bP,bQ){var bR;bR=bP.s;bR==null?Q.Obsolete(bQ):bR!=null&&bR.$==2?Q.EnqueueSafe(bR.$1,bQ):bR!=null&&bR.$==3?Q.EnqueueSafe(bR.$1,bQ):void 0;};R.GetFieldValues=function(bP){var bQ,bR;bQ=[];for(var bS in bP)bQ.push(bP[bS]);return bQ;};S.Insert=function(bP,bQ){var bR,bS,bT;function bU(bV){if(!(bV===null))if(bV!=null&&bV.$==1)bR.push(bV.$0);else if(bV!=null&&bV.$==2){bU(bV.$0);bU(bV.$1);}else if(bV!=null&&bV.$==3)bV.$0(bP);else if(bV!=null&&bV.$==4)bS.push(bV.$0);}bR=[];bS=[];bU(bQ);bT=bR.slice(0);return _4.New(bP,S.Flags(bQ),bT,bS.length===0?null:{$:1,$0:function(bV){J.iter(function(bW){bW(bV);},bS);}});};S.EmptyAttr=function(){_5.$cctor();return _5.EmptyAttr;};S.Flags=function(bP){return bP!==null&&bP.hasOwnProperty("flags")?bP.flags:0;};S.Updates=function(bP){return C.MapTreeReduce(function(bQ){return bQ.NChanged();},B.Const(),B.Map2Unit,bP.DynNodes);};S.Empty=function(bP){return _4.New(bP,0,[],null);};S.Static=function(bP){return new F({$:3,$0:bP});};S.Dynamic=function(bP,bQ){return new F({$:1,$0:new bt.New(bP,bQ)});};S.HasExitAnim=function(bP){var bQ;bQ=2;return(bP.DynFlags&bQ)===bQ;};S.GetExitAnim=function(bP){return S.GetAnim(bP,function(bQ,bR){return bQ.NGetExitAnim(bR);});};S.HasEnterAnim=function(bP){var bQ;bQ=1;return(bP.DynFlags&bQ)===bQ;};S.GetEnterAnim=function(bP){return S.GetAnim(bP,function(bQ,bR){return bQ.NGetEnterAnim(bR);});};S.HasChangeAnim=function(bP){var bQ;bQ=4;return(bP.DynFlags&bQ)===bQ;};S.GetChangeAnim=function(bP){return S.GetAnim(bP,function(bQ,bR){return bQ.NGetChangeAnim(bR);});};S.AppendTree=function(bP,bQ){var bR;return bP===null?bQ:bQ===null?bP:(bR=new F({$:2,$0:bP,$1:bQ}),(S.SetFlags(bR,S.Flags(bP)|S.Flags(bQ)),bR));};S.GetAnim=function(bP,bQ){return bb.Concat(j.map(function(bR){return bQ(bR,bP.DynElem);},bP.DynNodes));};S.Sync=function(bP,bQ){j.iter(function(bR){bR.NSync(bP);},bQ.DynNodes);};S.SetFlags=function(bP,bQ){bP.flags=bQ;};U.Int=function(){U.set_counter(U.counter()+1);return U.counter();};U.set_counter=function(bP){_9.$cctor();_9.counter=bP;};U.counter=function(){_9.$cctor();return _9.counter;};V.notPresent=function(){return e.FailWith("The given key was not present in the dictionary.");};W.Get=function(bP){return bP instanceof a.Array?W.ArrayEnumerator(bP):x.Equals(typeof bP,"string")?W.StringEnumerator(bP):bP.GetEnumerator();};W.ArrayEnumerator=function(bP){return new X.New(0,null,function(bQ){var bR;bR=bQ.s;return bR<j.length(bP)&&(bQ.c=j.get(bP,bR),bQ.s=bR+1,true);},void 0);};W.StringEnumerator=function(bP){return new X.New(0,null,function(bQ){var bR;bR=bQ.s;return bR<bP.length&&(bQ.c=bP[bR],bQ.s=bR+1,true);},void 0);};W.Get0=function(bP){return bP instanceof a.Array?W.ArrayEnumerator(bP):x.Equals(typeof bP,"string")?W.StringEnumerator(bP):"GetEnumerator0"in bP?bP.GetEnumerator0():bP.GetEnumerator();};X=W.T=bK.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},f,X);X.New=bK.Ctor(function(bP,bQ,bR,bS){f.New.call(this);this.s=bP;this.c=bQ;this.n=bR;this.d=bS;},X);Y=g.ConcreteVar=bK.Class({get_View:function(){return this.view;},Set:function(bP){if(this.isConst)(function(bQ){return bQ("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bQ){bN.log(bQ);}));else{Q.Obsolete(this.snap);this.current=bP;this.snap=Q.New({$:2,$0:bP,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(bP){var bQ;bQ=bP(this.Get());bQ!=null&&bQ.$==1?this.Set(bQ.$0):void 0;}},p,Y);Y.New=bK.Ctor(function(bP,bQ,bR){var bS;bS=this;p.New.call(this);this.isConst=bP;this.current=bR;this.snap=bQ;this.view=function(){return bS.snap;};this.id=U.Int();},Y);Z=g.CheckedInput=bK.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,Z);_0.TryParseInt32=function(bP,bQ){return _0.TryParse(bP,-2147483648,2147483647,bQ);};_1.Doc=function(){_8.$cctor();return _8.Doc;};_1.ChildrenArray=function(bP){var bQ,bR,bS;bQ=[];for(bR=0,bS=bP.childNodes.length-1;bR<=bS;bR++)bQ.push(bP.childNodes[bR]);return bQ;};_1.IterSelector=function(bP,bQ,bR){var bS,bT,bU;bS=bP.querySelectorAll(bQ);for(bT=0,bU=bS.length-1;bT<=bU;bT++)bR(bS[bT]);};_1.InsertAt=function(bP,bQ,bR){var bS;if(!(bR.parentNode===bP&&bQ===(bS=bR.nextSibling,x.Equals(bS,null)?null:bS)))bP.insertBefore(bR,bQ);};_1.CreateText=function(bP){return _1.Doc().createTextNode(bP);};_1.SetAttr=function(bP,bQ,bR){bP.setAttribute(bQ,bR);};_1.RemoveNode=function(bP,bQ){if(bQ.parentNode===bP)bP.removeChild(bQ);};Q.Obsolete=function(bP){var bQ,bR,bS,bT,bU;bR=bP.s;if(bR==null||(bR!=null&&bR.$==2?(bQ=bR.$1,false):bR!=null&&bR.$==3?(bQ=bR.$1,false):true))void 0;else{bP.s=null;for(bS=0,bT=j.length(bQ)-1;bS<=bT;bS++){bU=j.get(bQ,bS);typeof bU=="object"?function(bV){Q.Obsolete(bV);}(bU):bU();}}};Q.New=function(bP){return{s:bP};};_4.New=function(bP,bQ,bR,bS){var bT;bT={DynElem:bP,DynFlags:bQ,DynNodes:bR};bK.SetOptional(bT,"OnAfterRender",bS);return bT;};_5.$cctor=function(){_5.$cctor=a.ignore;_5.EmptyAttr=null;};_6.$cctor=function(){_6.$cctor=a.ignore;_6.LoadedTemplates=new G.New$5();_6.LocalTemplatesLoaded=false;_6.TextHoleRE="\\${([^}]+)}";};_8.$cctor=function(){_8.$cctor=a.ignore;_8.Doc=self.document;};_9.$cctor=function(){_9.$cctor=a.ignore;_9.counter=0;};_.convertTextNode=function(bP){var bQ,bR,bS,bT,bU,bV;bQ=null;bR=0;bT=bP.textContent;bU=new a.RegExp(L.TextHoleRE(),"g");while(bQ=bU.exec(bT),bQ!==null){bP.parentNode.insertBefore(self.document.createTextNode($.string(bT,{$:1,$0:bR},{$:1,$0:bU.lastIndex-j.get(bQ,0).length-1})),bP);bR=bU.lastIndex;bV=self.document.createElement("span");bV.setAttribute("ws-replace",j.get(bQ,1).toLowerCase());bP.parentNode.insertBefore(bV,bP);}bU.lastIndex=0;bP.textContent=$.string(bT,{$:1,$0:bR},null);};_.failNotLoaded=function(bP){bN.warn("Instantiating non-loaded template",bP);};_.fillTextHole=function(bP,bQ,bR){var bS;bS=bP.querySelector("[ws-replace]");return x.Equals(bS,null)?(bN.warn("Filling non-existent text hole",bR),null):(bS.parentNode.replaceChild(new a.Text(bQ),bS),{$:1,$0:bS.getAttribute("ws-replace")});};_.removeHolesExcept=function(bP,bQ){function bR(bS){_1.IterSelector(bP,"["+bS+"]",function(bT){if(!bQ.Contains(bT.getAttribute(bS)))bT.removeAttribute(bS);});}bR("ws-attr");bR("ws-onafterrender");bR("ws-var");_1.IterSelector(bP,"[ws-hole]",function(bS){if(!bQ.Contains(bS.getAttribute("ws-hole"))){bS.removeAttribute("ws-hole");while(bS.hasChildNodes())bS.removeChild(bS.lastChild);}});_1.IterSelector(bP,"[ws-replace]",function(bS){if(!bQ.Contains(bS.getAttribute("ws-replace")))bS.parentNode.removeChild(bS);});_1.IterSelector(bP,"[ws-on]",function(bS){bS.setAttribute("ws-on",bi.concat(" ",j.filter(function(bT){return bQ.Contains(j.get(bi.SplitChars(bT,[":"],1),1));},bi.SplitChars(bS.getAttribute("ws-on"),[" "],1))));});_1.IterSelector(bP,"[ws-attr-holes]",function(bS){var bT,bU,bV,bW,bX;bT=bi.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++){bW=j.get(bT,bU);bS.setAttribute(bW,(bX=new a.RegExp(L.TextHoleRE(),"g"),bS.getAttribute(bW).replace(bX,function(bY,bZ){return bQ.Contains(bZ)?bY:"";})));}});};_.fillInstanceAttrs=function(bP,bQ){var bR,bS,bT,bU,bV;_.convertAttrs(bQ);bR=bQ.nodeName.toLowerCase();bS=bP.querySelector("[ws-attr="+bR+"]");if(x.Equals(bS,null))bN.warn("Filling non-existent attr hole",bR);else{bS.removeAttribute("ws-attr");for(bT=0,bU=bQ.attributes.length-1;bT<=bU;bT++){bV=bQ.attributes.item(bT);bV.name==="class"&&bS.hasAttribute("class")?bS.setAttribute("class",bS.getAttribute("class")+" "+bV.nodeValue):bS.setAttribute(bV.name,bV.nodeValue);}}};_.mapHoles=function(bP,bQ){function bR(bS){_1.IterSelector(bP,"["+bS+"]",function(bT){var bU,bV;bU=(bV=null,[bQ.TryGetValue(bT.getAttribute(bS).toLowerCase(),{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);bU[0]?bT.setAttribute(bS,bU[1]):void 0;});}bR("ws-hole");bR("ws-replace");bR("ws-attr");bR("ws-onafterrender");bR("ws-var");_1.IterSelector(bP,"[ws-on]",function(bS){bS.setAttribute("ws-on",bi.concat(" ",j.map(function(bT){var bU,bV,bW;bU=bi.SplitChars(bT,[":"],1);bV=(bW=null,[bQ.TryGetValue(j.get(bU,1),{get:function(){return bW;},set:function(bX){bW=bX;}}),bW]);return bV[0]?j.get(bU,0)+":"+bV[1]:bT;},bi.SplitChars(bS.getAttribute("ws-on"),[" "],1))));});_1.IterSelector(bP,"[ws-attr-holes]",function(bS){var bT,bU,bV;bT=bi.SplitChars(bS.getAttribute("ws-attr-holes"),[" "],1);for(bU=0,bV=bT.length-1;bU<=bV;bU++)(function(){var bW;function bX(bY,bZ){var b0;b0=e.KeyValue(bZ);return bY.replace(new a.RegExp("\\${"+b0[0]+"}","ig"),"${"+b0[1]+"}");}bW=j.get(bT,bU);return bS.setAttribute(bW,(((bK.Curried3(J.fold))(bX))(bS.getAttribute(bW)))(bQ));}());});};_.fill=function(bP,bQ,bR){while(true)if(bP.hasChildNodes())bR=bQ.insertBefore(bP.lastChild,bR);else return null;};_.convertAttrs=function(bP){var bR,bS,bT,bU,bV,bW,bX,bY;function bQ(bZ){var b0;b0=bP.getAttribute(bZ);b0===null?void 0:bP.setAttribute(bZ,b0.toLowerCase());}bR=bP.attributes;bS=[];bT=[];bU=[];for(bV=0,bW=bR.length-1;bV<=bW;bV++){bX=bR.item(bV);bi.StartsWith(bX.nodeName,"ws-on")&&bX.nodeName!=="ws-onafterrender"&&bX.nodeName!=="ws-on"?(bS.push(bX.nodeName),bT.push($.string(bX.nodeName,{$:1,$0:"ws-on".length},null)+":"+bX.nodeValue.toLowerCase())):!bi.StartsWith(bX.nodeName,"ws-")&&(new a.RegExp(L.TextHoleRE())).test(bX.nodeValue)?(bX.nodeValue=(bY=new a.RegExp(L.TextHoleRE(),"g"),bX.nodeValue.replace(bY,function(bZ,b0){return"${"+b0.toLowerCase()+"}";})),bU.push(bX.nodeName)):void 0;}!(bT.length==0)?bP.setAttribute("ws-on",bi.concat(" ",bT)):void 0;!(bU.length==0)?bP.setAttribute("ws-attr-holes",bi.concat(" ",bU)):void 0;bQ("ws-hole");bQ("ws-replace");bQ("ws-attr");bQ("ws-onafterrender");bQ("ws-var");j.iter(function(bZ){bP.removeAttribute(bZ);},bS);};$.string=function(bP,bQ,bR){return bQ==null?bR!=null&&bR.$==1?bP.slice(0,bR.$0+1):"":bR==null?bP.slice(bQ.$0):bP.slice(bQ.$0,bR.$0+1);};J.insufficient=function(){return e.FailWith("The input sequence has an insufficient number of elements.");};ba=v.KeyCollection=bK.Class({GetEnumerator$1:function(){return W.Get(J.map(function(bP){return bP.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},f,ba);ba.New=bK.Ctor(function(bP){f.New.call(this);this.d=bP;},ba);bb.get_UseAnimations=function(){return bm.UseAnimations();};bb.Play=function(bP){var bQ;bQ=null;return bq.Delay(function(){return bq.Bind(bb.Run(a.ignore,bm.Actions(bP)),function(){bm.Finalize(bP);return bq.Return(null);});});};bb.Append=function(bP,bQ){return{$:0,$0:br.Append(bP.$0,bQ.$0)};};bb.Run=function(bP,bQ){var bR;function bS(bT){function bU(bV,bW){var bX;bX=bW-bV;bQ.Compute(bX);bP();return bX<=bR?void a.requestAnimationFrame(function(bY){bU(bV,bY);}):bT();}a.requestAnimationFrame(function(bV){bU(bV,bV);});}bR=bQ.Duration;return bR===0?bq.Zero():bq.FromContinuations(function(bT,bU,bV){return bS.apply(null,[bT,bU,bV]);});};bb.Concat=function(bP){return{$:0,$0:br.Concat(J.map(bm.List,bP))};};bb.get_Empty=function(){return{$:0,$0:br.Empty()};};bc.BatchUpdatesEnabled=function(){bn.$cctor();return bn.BatchUpdatesEnabled;};bd.StartProcessor=function(bP){var bQ;function bR(){var bS;bS=null;return bq.Delay(function(){return bq.Bind(bP,function(){var bT;bT=bQ[0];return bT===1?(bQ[0]=0,bq.Zero()):bT===2?(bQ[0]=1,bR()):bq.Zero();});});}bQ=[0];return function(){var bS;bS=bQ[0];bS===0?(bQ[0]=1,bq.Start(bR(),null)):bS===1?bQ[0]=2:void 0;};};be.concat=function(bP){var bQ,bR;bQ=[];for(var bS in bP)bQ.push.apply(bQ,bP[bS]);return bQ;};bf.Handler=function(bP,bQ){return S.Static(function(bR){bR.addEventListener(bP,function(bS){return(bQ(bR))(bS);},false);});};bf.OnAfterRender=function(bP){return new F({$:4,$0:bP});};bf.Value=function(bP){function bQ(bR){return{$:1,$0:bR};}return bf.CustomValue(bP,a.id,function(bR){return bQ(a.id(bR));});};bf.Checked=function(bP){function bQ(bR,bS){return!x.Equals(bP.Get(),bR.checked)?bP.Set(bR.checked):null;}return F.Concat([bf.DynamicProp("checked",bP.get_View()),bf.Handler("change",function(bR){return function(bS){return bQ(bR,bS);};})]);};bf.IntValue=function(bP){return bf.CustomVar(bP,function(bQ,bR){var bS;bS=bR.get_Input();return bQ.value!==bS?void(bQ.value=bS):null;},function(bQ){var bR,bS,bT;bR=bQ.value;return{$:1,$0:bo.isBlank(bR)?(bQ.checkValidity?bQ.checkValidity():true)?new Z({$:2,$0:bR}):new Z({$:1,$0:bR}):(bS=(bT=0,[_0.TryParseInt32(bR,{get:function(){return bT;},set:function(bU){bT=bU;}}),bT]),bS[0]?new Z({$:0,$0:bS[1],$1:bR}):new Z({$:1,$0:bR}))};});};bf.IntValueUnchecked=function(bP){return bf.CustomValue(bP,a.String,function(bQ){var bR;return bo.isBlank(bQ)?{$:1,$0:0}:(bR=+bQ,bR!==bR>>0?null:{$:1,$0:bR});});};bf.FloatValue=function(bP){return bf.CustomVar(bP,function(bQ,bR){var bS;bS=bR.get_Input();return bQ.value!==bS?void(bQ.value=bS):null;},function(bQ){var bR,bS;bR=bQ.value;return{$:1,$0:bo.isBlank(bR)?(bQ.checkValidity?bQ.checkValidity():true)?new Z({$:2,$0:bR}):new Z({$:1,$0:bR}):(bS=+bR,a.isNaN(bS)?new Z({$:1,$0:bR}):new Z({$:0,$0:bS,$1:bR}))};});};bf.FloatValueUnchecked=function(bP){return bf.CustomValue(bP,a.String,function(bQ){var bR;return bo.isBlank(bQ)?{$:1,$0:0}:(bR=+bQ,a.isNaN(bR)?null:{$:1,$0:bR});});};bf.Dynamic=function(bP,bQ){return S.Dynamic(bQ,function(bR){return function(bS){return _1.SetAttr(bR,bP,bS);};});};bf.CustomValue=function(bP,bQ,bR){return bf.CustomVar(bP,function(bS,bT){bS.value=bQ(bT);},function(bS){return bR(bS.value);});};bf.DynamicProp=function(bP,bQ){return S.Dynamic(bQ,function(bR){return function(bS){bR[bP]=bS;};});};bf.CustomVar=function(bP,bQ,bR){function bS(bU,bV){return bP.UpdateMaybe(function(bW){var bX,bY;bX=bR(bU);return bX!=null&&bX.$==1&&(!x.Equals(bX.$0,bW)&&(bY=[bX,bX.$0],true))?bY[0]:null;});}function bT(bU,bV){var bW,bX;bW=bR(bU);return bW!=null&&bW.$==1&&(x.Equals(bW.$0,bV)&&(bX=bW.$0,true))?null:bQ(bU,bV);}return F.Concat([bf.Handler("change",function(bU){return function(bV){return bS(bU,bV);};}),bf.Handler("input",function(bU){return function(bV){return bS(bU,bV);};}),bf.Handler("keypress",function(bU){return function(bV){return bS(bU,bV);};}),bf.DynamicCustom(function(bU){return function(bV){return bT(bU,bV);};},bP.get_View())]);};bf.DynamicCustom=function(bP,bQ){return S.Dynamic(bQ,bP);};bh=bg.T=bK.Class({GetEnumerator:function(){return new X.New(this,null,function(bP){var bQ;bQ=bP.s;return bQ.$==0?false:(bP.c=bQ.$0,bP.s=bQ.$1,true);},void 0);},GetEnumerator0:function(){return W.Get(this);}},null,bh);bh.Empty=new bh({$:0});bi.concat=function(bP,bQ){return j.ofSeq(bQ).join(bP);};bi.SplitChars=function(bP,bQ,bR){return bi.Split(bP,new a.RegExp("["+bi.RegexEscape(bQ.join(""))+"]"),bR);};bi.StartsWith=function(bP,bQ){return bP.substring(0,bQ.length)==bQ;};bi.Split=function(bP,bQ,bR){return bR===1?j.filter(function(bS){return bS!=="";},bi.SplitWith(bP,bQ)):bi.SplitWith(bP,bQ);};bi.RegexEscape=function(bP){return bP.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bi.forall=function(bP,bQ){return J.forall(bP,bi.protect(bQ));};bi.SplitWith=function(bP,bQ){return bP.split(bQ);};bi.protect=function(bP){return bP===null?"":bP;};bk.New=function(bP,bQ){return{PreviousNodes:bP,Top:bQ};};bl.get_Empty=function(){return{$:0,$0:new H.New$3()};};bl.FindAll=function(bP){var bQ;function bR(bT){if(bT!=null&&bT.$==0){bR(bT.$0);bR(bT.$1);}else if(bT!=null&&bT.$==1)bS(bT.$0);else if(bT!=null&&bT.$==2)bR(bT.$0.Current);else if(bT!=null&&bT.$==6)j.iter(bS,bT.$0.Holes);}function bS(bT){bQ.push(bT);bR(bT.Children);}bQ=[];bR(bP);return{$:0,$0:new H.New$2(bQ)};};bl.Filter=function(bP,bQ){return{$:0,$0:by.Filter(bP,bQ.$0)};};bl.Except=function(bP,bQ){return{$:0,$0:by.Except(bP.$0,bQ.$0)};};bl.ToArray=function(bP){return by.ToArray(bP.$0);};bl.Intersect=function(bP,bQ){return{$:0,$0:by.Intersect(bP.$0,bQ.$0)};};bm.UseAnimations=function(){bp.$cctor();return bp.UseAnimations;};bm.Actions=function(bP){return bm.ConcatActions(j.choose(function(bQ){return bQ.$==1?{$:1,$0:bQ.$0}:null;},br.ToArray(bP.$0)));};bm.Finalize=function(bP){j.iter(function(bQ){if(bQ.$==0)bQ.$0();},br.ToArray(bP.$0));};bm.ConcatActions=function(bP){var bQ,bR,bS,bT;bQ=C.ofSeqNonCopying(bP);bR=j.length(bQ);return bR===0?bm.Const():bR===1?j.get(bQ,0):(bS=J.max(J.map(function(bU){return bU.Duration;},bQ)),(bT=j.map(function(bU){return bm.Prolong(bS,bU);},bQ),bm.Def(bS,function(bU){j.iter(function(bV){bV.Compute(bU);},bT);})));};bm.List=function(bP){return bP.$0;};bm.Const=function(bP){return bm.Def(0,function(){return bP;});};bm.Def=function(bP,bQ){return{Compute:bQ,Duration:bP};};bm.Prolong=function(bP,bQ){var bR,bS,bT;bR=bQ.Compute;bS=bQ.Duration;bT=bF.Create(function(){return bQ.Compute(bQ.Duration);});return{Compute:function(bU){return bU>=bS?bT.f():bR(bU);},Duration:bP};};bn.$cctor=function(){bn.$cctor=a.ignore;bn.BatchUpdatesEnabled=true;};bo.isBlank=function(bP){return bi.forall(bs.IsWhiteSpace,bP);};bp.$cctor=function(){bp.$cctor=a.ignore;bp.CubicInOut=bu.Custom(function(bP){var bQ;bQ=bP*bP;return 3*bQ-2*(bQ*bP);});bp.UseAnimations=true;};bq.Delay=function(bP){return function(bQ){try{(bP(null))(bQ);}catch(bR){bQ.k({$:1,$0:bR});}};};bq.Bind=function(bP,bQ){return bq.checkCancel(function(bR){bP(bv.New(function(bS){var bT;if(bS.$==0){bT=bS.$0;bq.scheduler().Fork(function(){try{(bQ(bT))(bR);}catch(bU){bR.k({$:1,$0:bU});}});}else bq.scheduler().Fork(function(){bR.k(bS);});},bR.ct));});};bq.Zero=function(){bw.$cctor();return bw.Zero;};bq.Start=function(bP,bQ){var bR,bS;bR=(bS=(bq.defCTS())[0],bQ==null?bS:bQ.$0);bq.scheduler().Fork(function(){if(!bR.c)bP(bv.New(function(bT){if(bT.$==1)bq.UncaughtAsyncError(bT.$0);},bR));});};bq.Return=function(bP){return function(bQ){bQ.k({$:0,$0:bP});};};bq.checkCancel=function(bP){return function(bQ){if(bQ.ct.c)bq.cancel(bQ);else bP(bQ);};};bq.defCTS=function(){bw.$cctor();return bw.defCTS;};bq.UncaughtAsyncError=function(bP){bN.log("WebSharper: Uncaught asynchronous exception",bP);};bq.FromContinuations=function(bP){return function(bQ){var bR;function bS(bT){if(bR[0])e.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bR[0]=true;bq.scheduler().Fork(bT);}}bR=[false];bP(function(bT){bS(function(){bQ.k({$:0,$0:bT});});},function(bT){bS(function(){bQ.k({$:1,$0:bT});});},function(bT){bS(function(){bQ.k({$:2,$0:bT});});});};};bq.cancel=function(bP){bP.k({$:2,$0:new bE.New(bP.ct)});};bq.scheduler=function(){bw.$cctor();return bw.scheduler;};br.Append=function(bP,bQ){return bP.$==0?bQ:bQ.$==0?bP:{$:2,$0:bP,$1:bQ};};br.ToArray=function(bP){var bQ;function bR(bS){if(bS.$==1)bQ.push(bS.$0);else if(bS.$==2){bR(bS.$0);bR(bS.$1);}else if(bS.$==3)j.iter(function(bT){bQ.push(bT);},bS.$0);}bQ=[];bR(bP);return bQ.slice(0);};br.Concat=function(bP){var bQ;bQ=C.ofSeqNonCopying(bP);return C.TreeReduce(br.Empty(),br.Append,bQ);};br.Empty=function(){bG.$cctor();return bG.Empty;};bs.IsWhiteSpace=function(bP){return bP.match(new a.RegExp("\\s"))!==null;};_0.TryParse=function(bP,bQ,bR,bS){var bT,bU;bT=+bP;bU=bT===bT-bT%1&&bT>=bQ&&bT<=bR;bU?bS.set(bT):void 0;return bU;};bt=g.DynamicAttrNode=bK.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bP){return bb.get_Empty();},NGetEnterAnim:function(bP){return bb.get_Empty();},NGetChangeAnim:function(bP){return bb.get_Empty();},NSync:function(bP){if(this.dirty){(this.push(bP))(this.value);this.dirty=false;}}},f,bt);bt.New=bK.Ctor(function(bP,bQ){var bR;bR=this;f.New.call(this);this.push=bQ;this.value=void 0;this.dirty=false;this.updates=B.Map(function(bS){bR.value=bS;bR.dirty=true;},bP);},bt);bu=g.Easing=bK.Class({},f,bu);bu.Custom=function(bP){return new bu.New(bP);};bu.New=bK.Ctor(function(bP){f.New.call(this);this.transformTime=bP;},bu);bv.New=function(bP,bQ){return{k:bP,ct:bQ};};bw.$cctor=function(){bw.$cctor=a.ignore;bw.noneCT=bx.New(false,[]);bw.scheduler=new bA.New();bw.defCTS=[new bB.New()];bw.Zero=bq.Return();bw.GetCT=function(bP){bP.k({$:0,$0:bP.ct});};};bx.New=function(bP,bQ){return{c:bP,r:bQ};};by.Filter=function(bP,bQ){return new H.New$2(j.filter(bP,by.ToArray(bQ)));};by.Except=function(bP,bQ){var bR;bR=new H.New$2(by.ToArray(bQ));bR.ExceptWith(by.ToArray(bP));return bR;};by.ToArray=function(bP){var bQ;bQ=j.create(bP.get_Count(),void 0);bP.CopyTo(bQ);return bQ;};by.Intersect=function(bP,bQ){var bR;bR=new H.New$2(by.ToArray(bP));bR.IntersectWith(by.ToArray(bQ));return bR;};bg.head=function(bP){return bP.$==1?bP.$0:bg.listEmpty();};bg.tail=function(bP){return bP.$==1?bP.$1:bg.listEmpty();};bg.listEmpty=function(){return e.FailWith("The input list was empty.");};bz.Clear=function(bP){bP.splice(0,j.length(bP));};bA=bq.Scheduler=bK.Class({Fork:function(bP){var bQ;bQ=this;this.robin.push(bP);this.idle?(this.idle=false,a.setTimeout(function(){bQ.tick();},0)):void 0;},tick:function(){var bP,bQ,bR;bQ=this;bR=bO.now();bP=true;while(bP)if(this.robin.length===0){this.idle=true;bP=false;}else{(this.robin.shift())();bO.now()-bR>40?(a.setTimeout(function(){bQ.tick();},0),bP=false):void 0;}}},f,bA);bA.New=bK.Ctor(function(){f.New.call(this);this.idle=true;this.robin=[];},bA);bB=d.CancellationTokenSource=bK.Class({},f,bB);bB.New=bK.Ctor(function(){f.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bB);bC.Children=function(bP,bQ){var bR,bS,bT;if(bQ!=null&&bQ.$==1){bT=[];bR=bQ.$0[0].nextSibling;while(bR!==bQ.$0[1]){bT.push(bR);bR=bR.nextSibling;}return{$:0,$0:bT};}else return{$:0,$0:j.init(bP.childNodes.length,(bS=bP.childNodes,function(bU){return bS[bU];}))};};bC.Except=function(bP,bQ){var bR;bR=bP.$0;return{$:0,$0:j.filter(function(bS){return j.forall(function(bT){return!(bS===bT);},bR);},bQ.$0)};};bC.Iter=function(bP,bQ){j.iter(bP,bQ.$0);};bC.DocChildren=function(bP){var bQ;function bR(bS){if(bS!=null&&bS.$==2)bR(bS.$0.Current);else if(bS!=null&&bS.$==1)bQ.push(bS.$0.El);else if(bS==null);else if(bS!=null&&bS.$==5)bQ.push(bS.$0);else if(bS!=null&&bS.$==4)bQ.push(bS.$0.Text);else if(bS!=null&&bS.$==6)j.iter(function(bT){if(bT==null||bT.constructor===P)bR(bT);else bQ.push(bT);},bS.$0.Els);else{bR(bS.$0);bR(bS.$1);}}bQ=[];bR(bP.Children);return{$:0,$0:C.ofSeqNonCopying(bQ)};};bE=d.OperationCanceledException=bK.Class({},bD,bE);bE.New=bK.Ctor(function(bP){bE.New$1.call(this,"The operation was canceled.",null,bP);},bE);bE.New$1=bK.Ctor(function(bP,bQ,bR){this.message=bP;this.inner=bQ;P.setPrototypeOf(this,bE.prototype);this.ct=bR;},bE);bF.Create=function(bP){return bI.New(false,bP,bF.forceLazy);};bF.forceLazy=function(){var bP;bP=this.v();this.c=true;this.v=bP;this.f=bF.cachedLazy;return bP;};bF.cachedLazy=function(){return this.v;};bG.$cctor=function(){bG.$cctor=a.ignore;bG.Empty={$:0};};bI.New=function(bP,bQ,bR){return{c:bP,v:bQ,f:bR};};bK.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
